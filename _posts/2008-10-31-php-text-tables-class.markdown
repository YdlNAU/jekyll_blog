--- 
layout: posts
categories: php
title: PHP Array to Text Tables
tags: php text 
---

PHP Array to Text Tables
========================

I needed this for a little project so I coded it up. I haven't done a lot of tests but it works just fine  for formatting the associative arrays I have run through it.

The class supports multi-line rows, limiting the width of the column, and automatically creating a  heading based on the keys from the associative array.

<strong>Usage and Output Example</strong>
<div id="gist-31474" class="gist">
<div class="gist-file">
<div class="gist-data gist-syntax">
		<div class="gist-highlight"><pre><div class="line" id="LC1"><span class="cp">&lt;?php</span></div><div class="line" id="LC2"><br></div><div class="line" id="LC3"><span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></div><div class="line" id="LC4">	<span class="k">array</span><span class="p">(</span><span class="s1">'company'</span><span class="o">=&gt;</span><span class="s1">'AIG'</span><span class="p">,</span> <span class="s1">'id'</span><span class="o">=&gt;</span><span class="m">1</span><span class="p">,</span> <span class="s1">'balance'</span><span class="o">=&gt;</span> <span class="s1">'-$99,999,999,999.00'</span><span class="p">),</span></div><div class="line" id="LC5">	<span class="k">array</span><span class="p">(</span><span class="s1">'company'</span><span class="o">=&gt;</span><span class="s1">'Wachovia'</span><span class="p">,</span> <span class="s1">'id'</span><span class="o">=&gt;</span><span class="m">2</span><span class="p">,</span> <span class="s1">'balance'</span><span class="o">=&gt;</span> <span class="s1">'-$10,000,000.00'</span><span class="p">),</span></div><div class="line" id="LC6">	<span class="k">array</span><span class="p">(</span><span class="s1">'company'</span><span class="o">=&gt;</span><span class="s1">'HP'</span><span class="p">,</span> <span class="s1">'id'</span><span class="o">=&gt;</span><span class="m">3</span><span class="p">,</span> <span class="s1">'balance'</span><span class="o">=&gt;</span> <span class="s1">'$555,000.000.00'</span><span class="p">),</span></div><div class="line" id="LC7">	<span class="k">array</span><span class="p">(</span><span class="s1">'company'</span><span class="o">=&gt;</span><span class="s1">'IBM'</span><span class="p">,</span> <span class="s1">'id'</span><span class="o">=&gt;</span><span class="m">4</span><span class="p">,</span> <span class="s1">'balance'</span><span class="o">=&gt;</span> <span class="s1">'$12,000.00'</span><span class="p">)</span></div><div class="line" id="LC8"><span class="p">);</span></div><div class="line" id="LC9"><br></div><div class="line" id="LC10"><span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayToTextTable</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span></div><div class="line" id="LC11"><span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">showHeaders</span><span class="p">(</span><span class="k">true</span><span class="p">);</span></div><div class="line" id="LC12"><span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">();</span></div><div class="line" id="LC13"><br></div><div class="line" id="LC14"><span class="cp">?&gt;</span><span class="x"></span></div></pre></div>
</div>
<div class="gist-meta">
	<a href="http://gist.github.com/raw/31474/18f2cebbee5d5e5964eb3d0b94ef0282ca5db188/php-to-text-table-example.php" style="float:right;">view raw</a>
	<a href="http://gist.github.com/31474#file_php_to_text_table_example.php" style="float:right;margin-right:10px;color:#666">php-to-text-table-example.php</a>
	<a href="http://gist.github.com/31474">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
</div>
</div>
</div>


<strong>Text Table Formatted Output of above example:</strong>
<pre class="terminal"><code>+----------+----+---------------------+
| COMPANY  | ID |       BALANCE       |
+----------+----+---------------------+
| AIG      | 1  | -$99,999,999,999.00 |
| Wachovia | 2  | -$10,000,000.00     |
| HP       | 3  | $555,000.000.00     |
| IBM      | 4  | $12,000.00          |
+----------+----+---------------------+</code></pre>


Here is the class:


<div id="gist-31477" class="gist">
<div class="gist-file">
<div class="gist-data gist-syntax">
		<div class="gist-highlight"><pre><div class="line" id="LC1"><span class="cp">&lt;?php</span></div><div class="line" id="LC2"><span class="sd">/**</span></div><div class="line" id="LC3"><span class="sd"> * Array to Text Table Generation Class</span></div><div class="line" id="LC4"><span class="sd"> *</span></div><div class="line" id="LC5"><span class="sd"> * @author Tony Landis &lt;tony@tonylandis.com&gt;</span></div><div class="line" id="LC6"><span class="sd"> * @link http://www.tonylandis.com/</span></div><div class="line" id="LC7"><span class="sd"> * @copyright Copyright (C) 2006-2009 Tony Landis</span></div><div class="line" id="LC8"><span class="sd"> * @license http://www.opensource.org/licenses/bsd-license.php</span></div><div class="line" id="LC9"><span class="sd"> */</span></div><div class="line" id="LC10"><span class="k">class</span> <span class="nc">ArrayToTextTable</span></div><div class="line" id="LC11"><span class="p">{</span></div><div class="line" id="LC12">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/** </span></div><div class="line" id="LC13"><span class="sd">     * @var array The array for processing</span></div><div class="line" id="LC14"><span class="sd">     */</span></div><div class="line" id="LC15">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$rows</span><span class="p">;</span></div><div class="line" id="LC16"><br></div><div class="line" id="LC17">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/** </span></div><div class="line" id="LC18"><span class="sd">     * @var int The column width settings</span></div><div class="line" id="LC19"><span class="sd">     */</span></div><div class="line" id="LC20">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$cs</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="LC21"><br></div><div class="line" id="LC22">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC23"><span class="sd">     * @var int The Row lines settings</span></div><div class="line" id="LC24"><span class="sd">     */</span></div><div class="line" id="LC25">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$rs</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="LC26"><br></div><div class="line" id="LC27">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC28"><span class="sd">     * @var int The Column index of keys</span></div><div class="line" id="LC29"><span class="sd">     */</span></div><div class="line" id="LC30">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$keys</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="LC31"><br></div><div class="line" id="LC32">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC33"><span class="sd">     * @var int Max Column Height (returns)</span></div><div class="line" id="LC34"><span class="sd">     */</span></div><div class="line" id="LC35">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$mH</span> <span class="o">=</span> <span class="m">2</span><span class="p">;</span></div><div class="line" id="LC36"><br></div><div class="line" id="LC37">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC38"><span class="sd">     * @var int Max Row Width (chars)</span></div><div class="line" id="LC39"><span class="sd">     */</span></div><div class="line" id="LC40">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$mW</span> <span class="o">=</span> <span class="m">30</span><span class="p">;</span></div><div class="line" id="LC41"><br></div><div class="line" id="LC42">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$head</span>  <span class="o">=</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="LC43">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$pcen</span>  <span class="o">=</span> <span class="s2">"+"</span><span class="p">;</span></div><div class="line" id="LC44">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$prow</span>  <span class="o">=</span> <span class="s2">"-"</span><span class="p">;</span></div><div class="line" id="LC45">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="nv">$pcol</span>  <span class="o">=</span> <span class="s2">"|"</span><span class="p">;</span></div><div class="line" id="LC46">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC47">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC48">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/** Prepare array into textual format</span></div><div class="line" id="LC49"><span class="sd">     *</span></div><div class="line" id="LC50"><span class="sd">     * @param array $rows The input array</span></div><div class="line" id="LC51"><span class="sd">     * @param bool $head Show heading</span></div><div class="line" id="LC52"><span class="sd">     * @param int $maxWidth Max Column Height (returns)</span></div><div class="line" id="LC53"><span class="sd">     * @param int $maxHeight Max Row Width (chars)</span></div><div class="line" id="LC54"><span class="sd">     */</span></div><div class="line" id="LC55">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">function</span> <span class="nf">ArrayToTextTable</span><span class="p">(</span><span class="nv">$rows</span><span class="p">)</span></div><div class="line" id="LC56">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC57">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span> <span class="o">=&amp;</span> <span class="nv">$rows</span><span class="p">;</span></div><div class="line" id="LC58">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span><span class="o">=</span><span class="k">array</span><span class="p">();</span></div><div class="line" id="LC59">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rs</span><span class="o">=</span><span class="k">array</span><span class="p">();</span></div><div class="line" id="LC60">&nbsp;</div><div class="line" id="LC61">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$xc</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span><span class="p">))</span> <span class="k">return</span> <span class="k">false</span><span class="p">;</span> </div><div class="line" id="LC62">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span></div><div class="line" id="LC63">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$columns</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span><span class="p">);</span></div><div class="line" id="LC64">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC65">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span><span class="p">(</span><span class="nv">$x</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> <span class="nv">$x</span><span class="o">&lt;</span><span class="nv">$xc</span><span class="p">;</span> <span class="nv">$x</span><span class="o">++</span><span class="p">)</span></div><div class="line" id="LC66">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span><span class="p">(</span><span class="nv">$y</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> <span class="nv">$y</span><span class="o">&lt;</span><span class="nv">$columns</span><span class="p">;</span> <span class="nv">$y</span><span class="o">++</span><span class="p">)</span>    </div><div class="line" id="LC67">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setMax</span><span class="p">(</span><span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span><span class="p">[</span><span class="nv">$x</span><span class="p">][</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span><span class="p">[</span><span class="nv">$y</span><span class="p">]]);</span></div><div class="line" id="LC68">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC69">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC70">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC71"><span class="sd">     * Show the headers using the key values of the array for the titles</span></div><div class="line" id="LC72"><span class="sd">     * </span></div><div class="line" id="LC73"><span class="sd">     * @param bool $bool</span></div><div class="line" id="LC74"><span class="sd">     */</span></div><div class="line" id="LC75">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">function</span> <span class="nf">showHeaders</span><span class="p">(</span><span class="nv">$bool</span><span class="p">)</span></div><div class="line" id="LC76">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC77">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$bool</span><span class="p">)</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setHeading</span><span class="p">();</span> </div><div class="line" id="LC78">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span> </div><div class="line" id="LC79">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC80">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC81"><span class="sd">     * Set the maximum width (number of characters) per column before truncating</span></div><div class="line" id="LC82"><span class="sd">     * </span></div><div class="line" id="LC83"><span class="sd">     * @param int $maxWidth</span></div><div class="line" id="LC84"><span class="sd">     */</span></div><div class="line" id="LC85">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">function</span> <span class="nf">setMaxWidth</span><span class="p">(</span><span class="nv">$maxWidth</span><span class="p">)</span></div><div class="line" id="LC86">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC87">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$maxWidth</span><span class="p">;</span></div><div class="line" id="LC88">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC89">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC90">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC91"><span class="sd">     * Set the maximum height (number of lines) per row before truncating</span></div><div class="line" id="LC92"><span class="sd">     * </span></div><div class="line" id="LC93"><span class="sd">     * @param int $maxHeight</span></div><div class="line" id="LC94"><span class="sd">     */</span></div><div class="line" id="LC95">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">function</span> <span class="nf">setMaxHeight</span><span class="p">(</span><span class="nv">$maxHeight</span><span class="p">)</span></div><div class="line" id="LC96">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC97">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mH</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$maxHeight</span><span class="p">;</span></div><div class="line" id="LC98">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC99">&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC100">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sd">/**</span></div><div class="line" id="LC101"><span class="sd">     * Prints the data to a text table</span></div><div class="line" id="LC102"><span class="sd">     *</span></div><div class="line" id="LC103"><span class="sd">     * @param bool $return Set to 'true' to return text rather than printing</span></div><div class="line" id="LC104"><span class="sd">     * @return mixed</span></div><div class="line" id="LC105"><span class="sd">     */</span></div><div class="line" id="LC106">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">(</span><span class="nv">$return</span><span class="o">=</span><span class="k">false</span><span class="p">)</span></div><div class="line" id="LC107">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC108">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$return</span><span class="p">)</span> <span class="nb">ob_start</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span> </div><div class="line" id="LC109">&nbsp;&nbsp;</div><div class="line" id="LC110">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">printLine</span><span class="p">();</span></div><div class="line" id="LC111">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">printHeading</span><span class="p">();</span></div><div class="line" id="LC112">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC113">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$rc</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span><span class="p">);</span></div><div class="line" id="LC114">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> <span class="nv">$i</span><span class="o">&lt;</span><span class="nv">$rc</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">printRow</span><span class="p">(</span><span class="nv">$i</span><span class="p">);</span></div><div class="line" id="LC115">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class="line" id="LC116">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">printLine</span><span class="p">(</span><span class="k">false</span><span class="p">);</span></div><div class="line" id="LC117"><br></div><div class="line" id="LC118">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$return</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC119">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$contents</span> <span class="o">=</span> <span class="nb">ob_get_contents</span><span class="p">();</span></div><div class="line" id="LC120">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">ob_end_clean</span><span class="p">();</span></div><div class="line" id="LC121">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="nv">$contents</span><span class="p">;</span></div><div class="line" id="LC122">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC123">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC124"><br></div><div class="line" id="LC125">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="k">function</span> <span class="nf">setHeading</span><span class="p">()</span></div><div class="line" id="LC126">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC127">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>  </div><div class="line" id="LC128">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span> <span class="k">as</span> <span class="nv">$colKey</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span></div><div class="line" id="LC129">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span> </div><div class="line" id="LC130">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setMax</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="nv">$colKey</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span></div><div class="line" id="LC131">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$data</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">]</span> <span class="o">=</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span></div><div class="line" id="LC132">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC133">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="k">return</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="LC134">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">head</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">;</span></div><div class="line" id="LC135">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC136"><br></div><div class="line" id="LC137">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="k">function</span> <span class="nf">printLine</span><span class="p">(</span><span class="nv">$nl</span><span class="o">=</span><span class="k">true</span><span class="p">)</span></div><div class="line" id="LC138">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC139">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcen</span><span class="p">;</span></div><div class="line" id="LC140">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span></div><div class="line" id="LC141">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">prow</span> <span class="o">.</span></div><div class="line" id="LC142">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">str_pad</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$val</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">prow</span><span class="p">,</span> <span class="nx">STR_PAD_RIGHT</span><span class="p">)</span> <span class="o">.</span></div><div class="line" id="LC143">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">prow</span> <span class="o">.</span></div><div class="line" id="LC144">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcen</span><span class="p">;</span></div><div class="line" id="LC145">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$nl</span><span class="p">)</span> <span class="k">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span></div><div class="line" id="LC146">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC147"><br></div><div class="line" id="LC148">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="k">function</span> <span class="nf">printHeading</span><span class="p">()</span></div><div class="line" id="LC149">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC150">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">head</span><span class="p">))</span> <span class="k">return</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="LC151"><br></div><div class="line" id="LC152">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcol</span><span class="p">;</span></div><div class="line" id="LC153">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span></div><div class="line" id="LC154">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="s1">' '</span><span class="o">.</span></div><div class="line" id="LC155">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">str_pad</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">head</span><span class="p">[</span><span class="nv">$key</span><span class="p">],</span> <span class="nv">$val</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="nx">STR_PAD_BOTH</span><span class="p">)</span> <span class="o">.</span></div><div class="line" id="LC156">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s1">' '</span> <span class="o">.</span></div><div class="line" id="LC157">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcol</span><span class="p">;</span></div><div class="line" id="LC158"><br></div><div class="line" id="LC159">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span></div><div class="line" id="LC160">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">printLine</span><span class="p">();</span></div><div class="line" id="LC161">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC162"><br></div><div class="line" id="LC163">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="k">function</span> <span class="nf">printRow</span><span class="p">(</span><span class="nv">$rowKey</span><span class="p">)</span></div><div class="line" id="LC164">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC165">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// loop through each line</span></div><div class="line" id="LC166">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span><span class="p">(</span><span class="nv">$line</span><span class="o">=</span><span class="m">1</span><span class="p">;</span> <span class="nv">$line</span> <span class="o">&lt;=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rs</span><span class="p">[</span><span class="nv">$rowKey</span><span class="p">];</span> <span class="nv">$line</span><span class="o">++</span><span class="p">)</span></div><div class="line" id="LC167">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC168">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcol</span><span class="p">;</span>  </div><div class="line" id="LC169">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span><span class="p">(</span><span class="nv">$colKey</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> <span class="nv">$colKey</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span><span class="p">);</span> <span class="nv">$colKey</span><span class="o">++</span><span class="p">)</span></div><div class="line" id="LC170">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span> </div><div class="line" id="LC171">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="s2">" "</span><span class="p">;</span></div><div class="line" id="LC172">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="nb">str_pad</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rows</span><span class="p">[</span><span class="nv">$rowKey</span><span class="p">][</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">keys</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">]],</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span> <span class="o">*</span> <span class="p">(</span><span class="nv">$line</span><span class="o">-</span><span class="m">1</span><span class="p">)),</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span><span class="p">),</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">],</span> <span class="s1">' '</span><span class="p">,</span> <span class="nx">STR_PAD_RIGHT</span><span class="p">);</span></div><div class="line" id="LC173">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span> <span class="s2">" "</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pcol</span><span class="p">;</span>          </div><div class="line" id="LC174">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>  </div><div class="line" id="LC175">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">print</span>  <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span></div><div class="line" id="LC176">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC177">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC178"><br></div><div class="line" id="LC179">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">private</span> <span class="k">function</span> <span class="nf">setMax</span><span class="p">(</span><span class="nv">$rowKey</span><span class="p">,</span> <span class="nv">$colKey</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$colVal</span><span class="p">)</span></div><div class="line" id="LC180">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span> </div><div class="line" id="LC181">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$w</span> <span class="o">=</span> <span class="nb">mb_strlen</span><span class="p">(</span><span class="nv">$colVal</span><span class="p">);</span></div><div class="line" id="LC182">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$h</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span></div><div class="line" id="LC183">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$w</span> <span class="o">&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span><span class="p">)</span></div><div class="line" id="LC184">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">{</span></div><div class="line" id="LC185">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$h</span> <span class="o">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="nv">$w</span> <span class="o">%</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span><span class="p">);</span></div><div class="line" id="LC186">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$h</span> <span class="o">&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mH</span><span class="p">)</span> <span class="nv">$h</span><span class="o">=</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mH</span><span class="p">;</span></div><div class="line" id="LC187">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$w</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mW</span><span class="p">;</span></div><div class="line" id="LC188">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC189">&nbsp;</div><div class="line" id="LC190">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">])</span> <span class="o">||</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">$w</span><span class="p">)</span></div><div class="line" id="LC191">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cs</span><span class="p">[</span><span class="nv">$colKey</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$w</span><span class="p">;</span></div><div class="line" id="LC192"><br></div><div class="line" id="LC193">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span><span class="p">(</span><span class="nv">$rowKey</span> <span class="o">!==</span> <span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rs</span><span class="p">[</span><span class="nv">$rowKey</span><span class="p">])</span> <span class="o">||</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rs</span><span class="p">[</span><span class="nv">$rowKey</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">$h</span><span class="p">))</span></div><div class="line" id="LC194">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rs</span><span class="p">[</span><span class="nv">$rowKey</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$h</span><span class="p">;</span></div><div class="line" id="LC195">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span></div><div class="line" id="LC196"><span class="p">}</span></div><div class="line" id="LC197"><span class="cp">?&gt;</span><span class="x"></span></div></pre></div>
</div>
<div class="gist-meta">
	<a href="http://gist.github.com/raw/31477/8ed44a6fa6e0b27f5ad52a5c0c708022b184307b/array-to-texttable.php" style="float:right;">view raw</a>
	<a href="http://gist.github.com/31477#file_array_to_texttable.php" style="float:right;margin-right:10px;color:#666">array-to-texttable.php</a>
	<a href="http://gist.github.com/31477">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
</div>
</div>
</div>

